[tox]
envlist = py311,py312,py313,py314
skipsdist = False
isolated_build = True

[testenv]
description = Run tests with pytest
deps =
    pytest>=7.0.0
    pytest-cov>=4.0.0
    pytest-xdist>=3.0.0
    pandas>=2.0.0
    numpy>=1.24.0
    polars>=0.19.0
    pyarrow>=13.0.0
    geopandas>=0.14.0
    shapely>=2.0.0
    rich>=13.0.0
    ipython>=8.0.0

commands =
    pytest tests/test_new_features.py -v --tb=short --cov=parquetframe --cov-report=term-missing

[testenv:lint]
description = Run code quality checks
deps =
    black>=23.0.0
    ruff>=0.1.0
    mypy>=1.0.0
commands =
    black --check src/
    ruff check src/
    mypy src/parquetframe

[testenv:format]
description = Format code
deps =
    black>=23.0.0
commands =
    black src/ tests/ examples/

[testenv:docs]
description = Build documentation
deps =
    mkdocs>=1.5.0
    mkdocs-material>=9.0.0
commands =
    mkdocs build --strict

[testenv:minimal]
description = Run tests with minimal dependencies
deps =
    pytest>=7.0.0
    pytest-cov>=4.0.0
    pandas>=2.0.0
    numpy>=1.24.0
commands =
    pytest tests/test_new_features.py::TestSQLEngine -v

[testenv:full]
description = Run all tests including integration
deps =
    {[testenv]deps}
    duckdb>=0.9.0
    datafusion>=32.0.0
commands =
    pytest tests/ -v --tb=short --cov=parquetframe --cov-report=html --cov-report=term

[gh-actions]
python =
    3.11: py311
    3.12: py312
    3.13: py313
    3.14: py314
